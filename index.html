<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Recruiter Calculator Pro by Vansh Bharwani</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f8f9fa; }
    .section { padding: 60px 20px; text-align: center; }
    .landing { background: linear-gradient(to right, #0f2027, #203a43, #2c5364); color: white; }
    .landing h1 { font-size: 2.5rem; margin-bottom: 20px; }
    .landing button { padding: 15px 30px; font-size: 1rem; background: #ff7e5f; color: white; border: none; border-radius: 5px; cursor: pointer; transition: background 0.3s ease; }
    .landing button:hover { background: #eb4d3d; }

    .container { background: white; padding: 20px; border-radius: 10px; max-width: 400px; margin: auto; box-shadow: 0 0 10px rgba(0,0,0,0.1); margin-bottom: 40px; }
    input { width: 100%; padding: 8px; margin-top: 5px; margin-bottom: 10px; }
    button.submit-btn { background-color: #007bff; color: white; padding: 10px; border: none; width: 100%; border-radius: 5px; cursor: pointer; }
    button.submit-btn:hover { background-color: #0056b3; }
    .hidden { display: none; }
    .warning { color: red; margin-top: 10px; text-align: center; }
    .history { background: #e9ecef; padding: 10px; margin-top: 10px; text-align: left; }

    /* Smooth scrolling */
    html { scroll-behavior: smooth; }
  </style>
</head>
<body>

  <!-- Landing Page -->
  <div class="section landing">
    <h1>Welcome to Recruiter Calculator Pro <br> by Vansh Bharwani</h1>
    <button onclick="document.getElementById('loginSection').scrollIntoView({behavior: 'smooth'});">Get Started</button>
  </div>

  <!-- Login Section -->
  <div class="section" id="loginSection">
    <div class="container" id="loginContainer">
      <h2>Login</h2>
      <input type="text" id="loginUsername" placeholder="Username"/>
      <input type="password" id="loginPassword" placeholder="Password"/>
      <button class="submit-btn" onclick="login()">Login</button>
      <p>Don't have an account? <a href="#" onclick="showRegister()">Register here</a></p>
      <div class="warning" id="loginWarning"></div>
    </div>

    <!-- Register Section -->
    <div class="container hidden" id="registerContainer">
      <h2>Register</h2>
      <input type="text" id="registerUsername" placeholder="Choose Username"/>
      <input type="password" id="registerPassword" placeholder="Choose Password"/>
      <button class="submit-btn" onclick="register()">Register</button>
      <p>Already have an account? <a href="#" onclick="showLogin()">Back to Login</a></p>
      <div class="warning" id="registerWarning"></div>
    </div>
  </div>

  <!-- Calculator Page -->
  <div class="section hidden" id="calculatorPage">
    <div class="container">
      <h2>Calculator</h2>
      <input type="number" id="payRate" placeholder="Pay Rate ($)" />
      <input type="number" id="maxPayRate" placeholder="Client Max Bill Rate ($)" />
      <input type="number" id="marginPercent" placeholder="Expected Margin (%)" />
      <input type="number" id="overhead" placeholder="Overhead (%)" value="25" />
      <input type="number" id="vmsFee" placeholder="VMS Fee (%)" value="0" />
      <button class="submit-btn" onclick="calculate()">Calculate</button>
      <button class="submit-btn" style="background: #28a745; margin-top: 10px;" onclick="showHistory()">View History</button>
      <div id="result"></div>
      <div id="history" class="history hidden"></div>
    </div>
  </div>

  <script>
    // Temporary database
    let users = {
      "admin": "admin",
      "jahaan": "jahaan"
    };
    let currentUser = null;

    function showRegister() {
      document.getElementById('loginContainer').classList.add('hidden');
      document.getElementById('registerContainer').classList.remove('hidden');
    }

    function showLogin() {
      document.getElementById('registerContainer').classList.add('hidden');
      document.getElementById('loginContainer').classList.remove('hidden');
    }

    function register() {
      const username = document.getElementById('registerUsername').value;
      const password = document.getElementById('registerPassword').value;
      const warning = document.getElementById('registerWarning');
      if (username && password) {
        if (users[username]) {
          warning.innerText = "User already exists!";
        } else {
          users[username] = password;
          localStorage.setItem(`history_${username}`, JSON.stringify([])); // initialize history
          warning.innerText = "Registration successful! Go back to login.";
        }
      } else {
        warning.innerText = "Please fill out both fields.";
      }
    }

    function login() {
      const username = document.getElementById('loginUsername').value;
      const password = document.getElementById('loginPassword').value;
      const warning = document.getElementById('loginWarning');
      if (users[username] && users[username] === password) {
        currentUser = username;
        document.getElementById('loginSection').classList.add('hidden');
        document.getElementById('calculatorPage').classList.remove('hidden');
      } else {
        warning.innerText = "Invalid credentials.";
      }
    }

    function calculate() {
      const payRate = parseFloat(document.getElementById('payRate').value);
      const maxPayRate = parseFloat(document.getElementById('maxPayRate').value);
      const marginPercent = parseFloat(document.getElementById('marginPercent').value);
      const overhead = parseFloat(document.getElementById('overhead').value);
      const vmsFee = parseFloat(document.getElementById('vmsFee').value);

      const loadedPayRate = payRate * (1 + overhead / 100);
      const billRate = loadedPayRate / (1 - marginPercent / 100);
      const marginDollars = billRate - loadedPayRate;

      let warning = billRate > maxPayRate ? "⚠️ Bill Rate exceeds Client's Max Bill Rate!" : '';

      document.getElementById('result').innerHTML = `
        <p><strong>Loaded Pay Rate:</strong> $${loadedPayRate.toFixed(2)}</p>
        <p><strong>Bill Rate for Expected Margin:</strong> $${billRate.toFixed(2)}</p>
        <p><strong>Expected Margin ($):</strong> $${marginDollars.toFixed(2)}</p>
        <p style="color:red;">${warning}</p>
      `;

      // Save history
      const history = JSON.parse(localStorage.getItem(`history_${currentUser}`) || "[]");
      history.push({
        payRate, maxPayRate, marginPercent, overhead, vmsFee, billRate: billRate.toFixed(2), date: new Date().toLocaleString()
      });
      localStorage.setItem(`history_${currentUser}`, JSON.stringify(history));
    }

    function showHistory() {
      const history = JSON.parse(localStorage.getItem(`history_${currentUser}`) || "[]");
      const historyDiv = document.getElementById('history');
      if (history.length === 0) {
        historyDiv.innerHTML = "<p>No history yet.</p>";
      } else {
        historyDiv.innerHTML = history.map(entry => `
          <div>
            <strong>Date:</strong> ${entry.date}<br>
            Pay Rate: $${entry.payRate}, Margin: ${entry.marginPercent}%, Overhead: ${entry.overhead}%, VMS Fee: ${entry.vmsFee}%, Bill Rate: $${entry.billRate}
            <hr>
          </div>
        `).join('');
      }
      historyDiv.classList.toggle('hidden');
    }
  </script>
</body>
</html>
